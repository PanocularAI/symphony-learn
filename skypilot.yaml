# SkyPilot configuration to launch a 2-node cluster on Vast.ai

name: nebius-cluster-2nodes

resources:
  # Specify the Vast provider and GPU configuration
  infra: nebius
  accelerators: {h100:1}   # 4 GPUs per node, change to desired GPU model
  #disk_size: 200           # optional: 200GB disk per node
  #use_spot: true           # Vast.ai runs on spot instances

num_nodes: 2               # total nodes in cluster

setup: |
  git clone --recursive https://github.com/PanocularAI/symphony-learn.git
  cd symphony-learn
  make all


run: |
  # Commands run after setup to verify cluster status
  echo "Running on $(hostname)"
  nvidia-smi
  echo "GPU count: $(nvidia-smi -L | wc -l)"
  echo "All nodes are ready."